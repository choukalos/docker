define(['es6-collections'],function(){'use strict';var processMap=new WeakMap(),origRaf,raf;origRaf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.onRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000 / 60);};function getProcess(id,fps){var process=processMap.get(id);if(!process){process={};processMap.set(id,process);}
if(process.fps!==fps){process.fps=fps;process.interval=1000 / fps;process.update=Date.now();}
return process;}
raf=function(callback,fps){var rafId=origRaf(callback);return fps?raf.tick(callback,fps):rafId;};raf.tick=function(id,fps){var process=getProcess(id,fps),now=Date.now(),delta=now-process.update,interval=process.interval;if(fps>=60||delta>=interval){process.update=now-delta%interval;return true;}
return false;};return raf;});