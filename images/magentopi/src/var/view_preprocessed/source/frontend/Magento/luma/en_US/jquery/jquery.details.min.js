/*! http://mths.be/details v0.0.6 by @mathias | includes http://mths.be/noselect v1.0.3 */
define(["jquery","modernizr/modernizr.details"],function($){var proto=$.fn,details,isOpera=Object.prototype.toString.call(window.opera)=='[object Opera]',isDetailsSupported=$('html').hasClass('details'),toggleOpen=function($details,$detailsSummary,$detailsNotSummary,toggle){var isOpen=typeof $details.attr('open')=='string',close=isOpen&&toggle||!isOpen&&!toggle;if(close){$details.removeClass('open').prop('open',false).triggerHandler('close.details');$detailsSummary.attr('aria-expanded',false);$detailsNotSummary.hide();}else{$details.addClass('open').prop('open',true).triggerHandler('open.details');$detailsSummary.attr('aria-expanded',true);$detailsNotSummary.show();}};proto.noSelect=function(){var none='none';return this.bind('selectstart dragstart mousedown',function(){return false;}).css({'MozUserSelect':none,'msUserSelect':none,'webkitUserSelect':none,'userSelect':none});};if(isDetailsSupported){details=proto.details=function(){return this.each(function(){var $details=$(this),$summary=$('summary',$details).first();$summary.attr({'role':'button','aria-expanded':$details.prop('open')}).on('click.xxx',function(){var close=$details.prop('open');$summary.attr('aria-expanded',!close);$details.triggerHandler((close?'close':'open')+'.details');});});};details.support=isDetailsSupported;}else{details=proto.details=function(){return this.each(function(){var $details=$(this),$detailsSummary=$('summary',$details).first(),$detailsNotSummary=$details.children(':not(summary)'),$detailsNotSummaryContents=$details.contents(':not(summary)');if(!$detailsSummary.length){$detailsSummary=$('<summary>').text($.mage.__('Details')).prependTo($details);}
if($detailsNotSummary.length!=$detailsNotSummaryContents.length){$detailsNotSummaryContents.filter(function(){return this.nodeType==3&&/[^ \t\n\f\r]/.test(this.data);}).wrap('<span>');$detailsNotSummary=$details.children(':not(summary)');}
toggleOpen($details,$detailsSummary,$detailsNotSummary);$detailsSummary.attr('role','button').noSelect().prop('tabIndex',0).off('click').on('click.details',function(){$detailsSummary.focus();toggleOpen($details,$detailsSummary,$detailsNotSummary,true);}).keyup(function(event){if(32==event.keyCode||(13==event.keyCode&&!isOpera)){event.preventDefault();$detailsSummary.click();}});});};details.support=isDetailsSupported;}});