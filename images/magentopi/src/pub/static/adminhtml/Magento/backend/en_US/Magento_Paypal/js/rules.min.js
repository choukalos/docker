define(['uiClass','Magento_Ui/js/modal/alert'],function(Class,alert){'use strict';var isSolutionEnabled=function(solution,enabler){return solution.find(enabler).val()==='1';},hasRelationsEnabled=function(data){var name;for(name in data.argument){if(data.solutionsElements[name]&&isSolutionEnabled(data.solutionsElements[name],data.enableButton)){return true;}}
return false;},setSolutionSelectEnabled=function(solution,enabler,enabled){enabled=!(enabled||typeof enabled==='undefined')?'0':'1';solution.find(enabler+' option[value='+enabled+']').prop('selected',true);},setSolutionPropEnabled=function(solution,enabler,enabled){enabled=!(enabled||typeof enabled==='undefined');solution.find(enabler).prop('disabled',enabled);},setSolutionMarkEnabled=function(solution,enabler,enabled){var solutionEnabler=solution.find('label[for="'+solution.find(enabler).attr('id')+'"]');enabled||typeof enabled==='undefined'?solutionEnabler.addClass('enabled'):solutionEnabler.removeClass('enabled');},setSolutionSectionMarkEnabled=function(solution,enabled){var solutionSection=solution.find('.section-config');enabled||typeof enabled==='undefined'?solutionSection.addClass('enabled'):solutionSection.removeClass('enabled');},setSolutionLabelsMarkEnabled=function(solution,enabled){var solutionLabels=solution.find('label.enabled');enabled||typeof enabled==='undefined'?solutionLabels.addClass('enabled'):solutionLabels.removeClass('enabled');},disableSolution=function(solution,enabler){setSolutionMarkEnabled(solution,enabler,false);setSolutionSelectEnabled(solution,enabler,false);setSolutionPropEnabled(solution,enabler,false);},enableSolution=function(solution,enabler){setSolutionPropEnabled(solution,enabler);setSolutionSelectEnabled(solution,enabler);setSolutionMarkEnabled(solution,enabler);},setSolutionConfigurationUnlock=function(solution,buttonConfiguration,unlock){var solutionConfiguration=solution.find(buttonConfiguration);unlock||typeof unlock==='undefined'?solutionConfiguration.removeClass('disabled').removeAttr('disabled'):solutionConfiguration.addClass('disabled').attr('disabled','disabled');},setSolutionUsedefaultEnabled=function(solution,enabler,checked){checked=!(checked||typeof checked==='undefined');solution.find('input[id="'+solution.find(enabler).attr('id')+'_inherit"]').prop('checked',checked);},forwardSolutionChange=function(solution,enabler){solution.find(enabler).change();},showDependsField=function(solution,identifier,show){show=show||typeof show==='undefined';solution.find(identifier).toggle(show);solution.find(identifier).closest('tr').toggle(show);solution.find(identifier).attr('disabled',!show);};return Class.extend({defaults:{executed:false},simpleDisable:function($target,$owner,data){setSolutionSelectEnabled($target,data.enableButton,false);setSolutionLabelsMarkEnabled($target,false);setSolutionSectionMarkEnabled($target,false);},simpleMarkEnable:function($target){setSolutionSectionMarkEnabled($target);},disable:function($target,$owner,data){this.simpleDisable($target,$owner,data);forwardSolutionChange($target,data.enableButton);},paypalExpressDisable:function($target,$owner,data){setSolutionSelectEnabled($target,data.enableButton,false);setSolutionLabelsMarkEnabled($target,false);forwardSolutionChange($target,data.enableButton);},paypalExpressLockConfiguration:function($target,$owner,data){setSolutionConfigurationUnlock($target,data.buttonConfiguration,false);},paypalExpressLockConfigurationConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableInContextPayPal)&&hasRelationsEnabled(data)){this.paypalExpressLockConfiguration($target,$owner,data);}},paypalExpressMarkDisable:function($target,$owner,data){if(!hasRelationsEnabled(data)){this.simpleDisable($target,$owner,data);}},paypalExpressUnlockConfiguration:function($target,$owner,data){if(!hasRelationsEnabled(data)){setSolutionConfigurationUnlock($target,data.buttonConfiguration);}},paypalBmlDisable:function($target,$owner,data){disableSolution($target,data.enableBmlPayPal);},paypalBmlDisableConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)){this.paypalBmlDisable($target,$owner,data);}},paypalBmlEnable:function($target,$owner,data){enableSolution($target,data.enableBmlPayPal);},payflowExpressDisable:function($target,$owner,data){disableSolution($target,data.enableExpress);},payflowExpressDisableConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)||hasRelationsEnabled(data)){this.payflowExpressDisable($target,$owner,data);forwardSolutionChange($target,data.enableExpress);}},payflowExpressEnable:function($target,$owner,data){enableSolution($target,data.enableExpress);forwardSolutionChange($target,data.enableExpress);},payflowExpressEnableConditional:function($target,$owner,data){if(hasRelationsEnabled(data)){setSolutionPropEnabled($target,data.enableExpress,false);setSolutionSelectEnabled($target,data.enableExpress);setSolutionMarkEnabled($target,data.enableExpress);}else{disableSolution($target,data.enableExpress);}},payflowExpressLockConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)){setSolutionPropEnabled($target,data.enableExpress,false);}},payflowExpressUsedefaultDisable:function($target,$owner,data){setSolutionUsedefaultEnabled($target,data.enableExpress,false);this.payflowExpressEnable($target,$owner,data);forwardSolutionChange($target,data.enableExpress);},payflowExpressUsedefaultEnable:function($target,$owner,data){setSolutionUsedefaultEnabled($target,data.enableExpress);this.payflowExpressDisable($target,$owner,data);forwardSolutionChange($target,data.enableExpress);},payflowBmlDisable:function($target,$owner,data){disableSolution($target,data.enableBml);},payflowBmlDisableConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)||hasRelationsEnabled(data)){this.payflowBmlDisable($target,$owner,data);}},payflowBmlDisableConditionalExpress:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableExpress)){this.payflowBmlDisable($target,$owner,data);}},payflowBmlEnable:function($target,$owner,data){enableSolution($target,data.enableBml);},payflowBmlEnableConditional:function($target,$owner,data){if(hasRelationsEnabled(data)){setSolutionPropEnabled($target,data.enableBml,false);setSolutionSelectEnabled($target,data.enableBml);setSolutionMarkEnabled($target,data.enableBml);}else{disableSolution($target,data.enableBml);}},payflowBmlLockConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)){setSolutionPropEnabled($target,data.enableBml,false);}},inContextEnable:function($target,$owner,data){enableSolution($target,data.enableInContextPayPal);},inContextDisable:function($target,$owner,data){disableSolution($target,data.enableInContextPayPal);},inContextShowMerchantId:function($target,$owner,data){showDependsField($target,data.dependsMerchantId);},inContextHideMerchantId:function($target,$owner,data){showDependsField($target,data.dependsMerchantId,false);},payflowShowSortOrder:function($target,$owner,data){showDependsField($target,data.dependsBmlSortOrder);},payflowHideSortOrder:function($target,$owner,data){showDependsField($target,data.dependsBmlSortOrder,false);},paypalShowSortOrder:function($target,$owner,data){showDependsField($target,data.dependsBmlApiSortOrder);},paypalHideSortOrder:function($target,$owner,data){showDependsField($target,data.dependsBmlApiSortOrder,false);},inContextActivate:function($target,$owner,data){setSolutionMarkEnabled($target,data.enableInContextPayPal);},inContextDeactivate:function($target,$owner,data){setSolutionMarkEnabled($target,data.enableInContextPayPal,false);},inContextDisableConditional:function($target,$owner,data){if(!isSolutionEnabled($target,data.enableButton)){this.inContextDisable($target,$owner,data);}},conflict:function($target,$owner,data){var newLine=String.fromCharCode(10,13);if(isSolutionEnabled($owner,data.enableButton)&&hasRelationsEnabled(data)&&!this.executed){this.executed=true;alert({content:'The following error(s) occurred:'+
newLine+'Some PayPal solutions conflict.'+
newLine+'Please re-enable the previously enabled payment solutions.'});}}});});